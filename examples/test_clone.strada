# test_clone.strada - Test struct cloning

struct Point {
    int x;
    int y;
}

struct Person {
    str name;
    int age;
    num salary;
}

func print_point(Point $p, str $label) void {
    say($label . ": (" . $p->x . ", " . $p->y . ")");
}

func print_person(Person $p, str $label) void {
    say($label . ":");
    say("  Name: " . $p->name);
    say("  Age: " . $p->age);
    say("  Salary: $" . $p->salary);
}

func main() int {
    say("╔══════════════════════════════════════╗");
    say("║  Struct Clone Test                   ║");
    say("╚══════════════════════════════════════╝");
    say("");
    
    # Test 1: Clone a Point
    say("=== Test 1: Clone Point ===");
    my Point $p1;
    $p1->x = 10;
    $p1->y = 20;
    print_point($p1, "Original");
    
    my Point $p2 = clone($p1);
    print_point($p2, "Clone");
    
    # Modify original
    $p1->x = 100;
    $p1->y = 200;
    
    say("");
    say("After modifying original:");
    print_point($p1, "Original");
    print_point($p2, "Clone (unchanged)");
    
    say("");
    
    # Test 2: Clone a Person (with string field)
    say("=== Test 2: Clone Person ===");
    my Person $alice;
    $alice->name = "Alice";
    $alice->age = 30;
    $alice->salary = 75000.50;
    print_person($alice, "Original");
    
    my Person $bob = clone($alice);
    print_person($bob, "Clone (before rename)");
    
    # Modify clone
    $bob->name = "Bob";
    $bob->age = 25;
    $bob->salary = 65000.00;
    
    say("");
    say("After modifying clone:");
    print_person($alice, "Original (unchanged)");
    print_person($bob, "Clone");
    
    say("");
    say("╔══════════════════════════════════════╗");
    say("║  ✓ Clone test passed!                ║");
    say("╚══════════════════════════════════════╝");
    
    return 0;
}
