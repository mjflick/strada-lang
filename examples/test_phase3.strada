/*
 * This file is part of the Strada Language (https://github.com/mjflick/strada-lang).
 * Copyright (c) 2026 Michael J. Flickinger
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, version 2.
 *
 * This program is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */

# test_phase3.strada - Test Phase 3: Struct Variables & Member Access

struct Point {
    int x;
    int y;
}

func create_point(int $x, int $y) Point {
    my Point $pt;
    $pt->x = $x;
    $pt->y = $y;
    return $pt;
}

func print_point(Point $pt) void {
    say("Point: x=" . $pt->x . " y=" . $pt->y);
}

func move_point(Point $pt, int $dx, int $dy) void {
    $pt->x = $pt->x + $dx;
    $pt->y = $pt->y + $dy;
}

func main() int {
    say("=== Phase 3: Native Struct Test ===");
    say("");
    
    # Create struct variable
    my Point $p = create_point(10, 20);
    
    say("Created point:");
    print_point($p);
    
    say("");
    say("Moving by (5, -3):");
    move_point($p, 5, -3);
    print_point($p);
    
    say("");
    say("Direct field access:");
    say("  x = " . $p->x);
    say("  y = " . $p->y);
    
    say("");
    say("Setting fields directly:");
    $p->x = 100;
    $p->y = 200;
    print_point($p);
    
    say("");
    say("SUCCESS! Native structs work!");
    
    return 0;
}
