# test_funcptr.strada - Test function pointers in structs

# Simple math functions
func add(int $a, int $b) int {
    return $a + $b;
}

func subtract(int $a, int $b) int {
    return $a - $b;
}

func multiply(int $a, int $b) int {
    return $a * $b;
}

# A struct with a function pointer
struct Calculator {
    str name;
    func(int, int) int operation;
}

func main() int {
    say("╔══════════════════════════════════════╗");
    say("║  Function Pointer Test               ║");
    say("╚══════════════════════════════════════╝");
    say("");
    
    # Create a calculator
    my Calculator $calc;
    $calc->name = "Adder";
    $calc->operation = &add;
    
    # Call through function pointer
    my int $result = $calc->operation(10, 5);
    say($calc->name . ": 10 + 5 = " . $result);
    
    # Change the operation
    $calc->name = "Subtractor";
    $calc->operation = &subtract;
    $result = $calc->operation(10, 5);
    say($calc->name . ": 10 - 5 = " . $result);
    
    # Another operation
    $calc->name = "Multiplier";
    $calc->operation = &multiply;
    $result = $calc->operation(10, 5);
    say($calc->name . ": 10 * 5 = " . $result);
    
    say("");
    say("╔══════════════════════════════════════╗");
    say("║  ✓ Function pointers working!        ║");
    say("╚══════════════════════════════════════╝");
    
    return 0;
}
