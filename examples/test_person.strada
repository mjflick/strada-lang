# test_person.strada - Test Person struct with all types

struct Person {
    str name;
    int age;
    num salary;
    str title;
}

func new_person(str $name, int $age, num $salary, str $title) Person {
    my Person $p;
    $p->name = $name;
    $p->age = $age;
    $p->salary = $salary;
    $p->title = $title;
    return $p;
}

func print_person(Person $p) void {
    say("Person:");
    say("  Name:   " . $p->name);
    say("  Age:    " . $p->age);
    say("  Salary: $" . $p->salary);
    say("  Title:  " . $p->title);
}

func give_raise(Person $p, num $amount) void {
    $p->salary = $p->salary + $amount;
}

func birthday(Person $p) void {
    $p->age = $p->age + 1;
}

func promote(Person $p, str $new_title) void {
    $p->title = $new_title;
}

func main() int {
    say("╔═════════════════════════════════╗");
    say("║  Person Struct Demo             ║");
    say("╚═════════════════════════════════╝");
    say("");
    
    my Person $alice = new_person("Alice Smith", 28, 75000.00, "Software Engineer");
    my Person $bob = new_person("Bob Jones", 35, 95000.50, "Senior Developer");
    
    say("=== Initial Employees ===");
    print_person($alice);
    say("");
    print_person($bob);
    
    say("");
    say("=== After Changes ===");
    
    # Give Alice a raise and promotion
    give_raise($alice, 15000.00);
    promote($alice, "Senior Engineer");
    
    # Bob has a birthday
    birthday($bob);
    give_raise($bob, 5000.00);
    
    say("");
    say("Alice after raise and promotion:");
    print_person($alice);
    
    say("");
    say("Bob after birthday and raise:");
    print_person($bob);
    
    say("");
    say("=== Direct Field Updates ===");
    $alice->name = "Alice Johnson";
    say("Alice changed name: " . $alice->name);
    
    say("");
    say("╔═════════════════════════════════╗");
    say("║  ✓ All person operations work! ║");
    say("╚═════════════════════════════════╝");
    
    return 0;
}
